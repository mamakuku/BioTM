use strict;
print "Please input the StopwordCSV:";

my $StopWordFile=<STDIN>;
$StopWordFile=~s/\"//g;#要是路徑有空格，路徑外部會用""套住，導致路徑字串無法啟動
chomp $StopWordFile;#去除變數中的換行字元(並非文章中)
print "Opening ".$StopWordFile."\n";
unless ( open(text,$StopWordFile) ) {
    print "Cannot open file $StopWordFile \n\n";
	 <STDIN>;
	 exit;
}
my @StopWordCSV= <text>; 
close text;#打開目標文件

print "\nStart to input Stopword list\n";
my @StopWords;
for(my $i=0;$i<@StopWordCSV;$i++){
	 my @temp = split ( ',', $StopWordCSV[$i]);
	for my $tmp ( @temp) {
	#print $tmp."\n";
		push( @StopWords, $tmp);
	}
}#對目標檔案內的字元以空格和換行為界線進行排序
undef @StopWordCSV;
print "\nEnd to input Stopword list\n";

#Read Stopword list

print "\nStart to input pubmed abstracts\n";


print "\nPlease input the reporter:\n";
my $textfile=<STDIN>;
$textfile=~s/\"//g;#要是路徑有空格，路徑外部會用""套住，導致路徑字串無法啟動

chomp $textfile;#去除變數中的換行字元(並非文章中)
unless ( open(text,$textfile) ) {
    print "Cannot open file $textfile \n\n";
	 <STDIN>;
	 exit;
}
my @word = <text>; 
close text;#打開目標文件

for(my $i=0;$i<@word;$i++){
	$word[$i] =~s/\W/ /g;#刪除所有英文數字以外的字元(亂碼)
}

my @merged;
for(my $i=0;$i<@word;$i++){
	my @splited = split ( ' ', $word[$i]);
	for my $tmp ( @splited) {
		push( @merged, $tmp);
	}
}#對目標檔案內的字元以空格和換行為界線進行排序

print "\nEnd to input pubmed abstracts\n";

#my @merged = sort @merged;#以字母順序進行再排序
		

my %toRemove;
foreach my $i (@StopWords){
	$toRemove{$StopWords[$i]}=1;
}

my $allword = scalar(@merged) ;
print  $allword ;
#不需要的Stopword

#open (proto,">WordListAndTF.csv")||die "File open error!";
#print "\nStart the Key\n";
#my %keys;
#printf proto("hkuguhkuhkuhukhuihkuh\n");
#close (proto)||die "File open error!";
# for my $key(@merged){
	# print $key;
	# if($toRemove{$key} || $key=~/\d/ || $key !~ /\D/ || $key=~ /\n/)
	# {
		# printf proto ("$toRemove{$key} , $key , $key/$allword")
	# }
	# else{
		# printf proto ("$toRemove{$key} , $key , $key/$allword")
	# }
	
# }




close (proto)


print "\nEnd the Key\n";
#foreach $key (keys %keys) {
#print "$keys{$key}\n";}
#foreach $value (values %keys)
#while(($key,$value)=each %keys)


exit;